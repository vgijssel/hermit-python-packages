# Task for Linux amd64 builds
linux_amd64_task:
  name: Linux amd64 Build
  container:
    image: ubuntu:24.04
    cpu: 4
    memory: 8G
  setup_script:
    - apt-get update
    - apt-get install -y curl git build-essential
    # Setup direnv
    - curl -sfL https://direnv.net/install.sh | bash
    - echo 'eval "$(direnv hook bash)"' >> ~/.bashrc
    - source ~/.bashrc
    - direnv allow .
  build_script:
    - task pex:build

# Task for Linux arm64 builds
linux_arm64_task:
  name: Linux arm64 Build
  arm_container:
    image: ubuntu:24.04
    cpu: 4
    memory: 8G
  setup_script:
    - apt-get update
    - apt-get install -y curl git build-essential
    # Setup direnv
    - curl -sfL https://direnv.net/install.sh | bash
    - echo 'eval "$(direnv hook bash)"' >> ~/.bashrc
    - source ~/.bashrc
    - direnv allow .
  build_script:
    - task pex:build
